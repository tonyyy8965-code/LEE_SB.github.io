<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ë©´ì ‘ í”¼ë“œë°± ì‹œìŠ¤í…œ | Gemini ì—°ë™</title>
    <style>
        /*
        * Modern Sports Broadcast Style Inspired CSS
        * íŠ¹ì§•: ë‹¤í¬ ë°°ê²½, ê°•ë ¬í•œ ê°•ì¡°ìƒ‰ (íŒŒë‘/ì´ˆë¡), ëª…í™•í•œ ì„¹ì…˜ êµ¬ë¶„
        */
        :root {
            --color-dark-bg: #1a1a2e; /* ë©”ì¸ ë‹¤í¬ ë°°ê²½ */
            --color-dark-surface: #2c2c4a; /* ì¹´ë“œ ë°°ê²½ */
            --color-primary-blue: #00bcd4; /* ê°•ì¡°ìƒ‰ - ì‹œì•ˆ */
            --color-secondary-green: #38c172; /* ì„±ê³µ ê°•ì¡°ìƒ‰ - ë…¹ìƒ‰ */
            --color-text-light: #e0e0e0; /* ë°ì€ í…ìŠ¤íŠ¸ */
            --color-border: #444466;
            --color-error: #ff5555;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-dark-bg);
            color: var(--color-text-light);
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .app-container {
            width: 100%;
            max-width: 1200px;
            padding: 30px;
            display: grid;
            grid-template-columns: 1fr 1.5fr; /* ì…ë ¥ í¼:ê²°ê³¼ ì˜ì—­ = 1:1.5 ë¹„ìœ¨ */
            gap: 30px;
        }

        header {
            grid-column: 1 / -1;
            text-align: center;
            border-bottom: 3px solid var(--color-primary-blue);
            padding-bottom: 20px;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.5em;
            color: var(--color-primary-blue);
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* ê³µí†µ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .card {
            background-color: var(--color-dark-surface);
            padding: 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            border: 1px solid var(--color-border);
        }

        h2 {
            font-size: 1.5em;
            margin-top: 0;
            color: var(--color-secondary-green);
            border-bottom: 2px solid var(--color-border);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        /* í¼ ìš”ì†Œ ìŠ¤íƒ€ì¼ */
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: var(--color-text-light);
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            box-sizing: border-box;
            background-color: #111122;
            color: var(--color-text-light);
            font-size: 1em;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus, textarea:focus {
            border-color: var(--color-primary-blue);
            outline: none;
        }

        textarea {
            resize: vertical;
            min-height: 120px;
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        #submitButton {
            width: 100%;
            padding: 15px;
            background-color: var(--color-primary-blue);
            color: var(--color-dark-bg);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            text-transform: uppercase;
            transition: background-color 0.3s, opacity 0.3s;
        }

        #submitButton:hover:not(:disabled) {
            background-color: #00a4b4;
        }

        #submitButton:disabled {
            background-color: #555577;
            opacity: 0.7;
            cursor: not-allowed;
        }

        /* ê²°ê³¼ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        #loading {
            text-align: center;
            padding: 20px;
            color: var(--color-secondary-green);
            font-size: 1.2em;
            display: none;
        }

        .feedback-item {
            margin-bottom: 15px;
            padding: 15px;
            border-left: 5px solid var(--color-secondary-green);
            background-color: #35355a;
            border-radius: 4px;
        }

        .feedback-item strong {
            display: block;
            font-size: 1.1em;
            color: var(--color-primary-blue);
            margin-bottom: 5px;
        }
        
        .feedback-item .score {
            font-size: 1.5em;
            color: #ffcc00; /* ë…¸ë€ìƒ‰ ì ìˆ˜ ê°•ì¡° */
            font-weight: bold;
        }

        .error {
            color: var(--color-error);
            font-weight: bold;
        }

        pre {
            background: #111122;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
            border: 1px solid var(--color-border);
            font-size: 0.9em;
        }

    </style>
</head>
<body>

<div class="app-container">
    <header>
        <h1>GEMINI INTERVIEW ASSISTANT</h1>
        <p>AI ê¸°ë°˜ì˜ ì „ë¬¸ì ì¸ ë©´ì ‘ í”¼ë“œë°±ì„ ë°›ì•„ë³´ì„¸ìš”.</p>
    </header>

    <div class="card input-section">
        <h2>ë©´ì ‘ ì •ë³´ ì…ë ¥</h2>
        <form id="feedbackForm">
            <label for="company">ì§€ì› íšŒì‚¬</label>
            <input type="text" id="company" value="Google" required>

            <label for="role">ì§€ì› ì§ë¬´</label>
            <input type="text" id="role" value="ë°±ì—”ë“œ ê°œë°œì" required>

            <label for="question">ìê¸°ì†Œê°œì„œ ë¬¸í•­ / ë©´ì ‘ ì§ˆë¬¸</label>
            <textarea id="question" required>FastAPIì—ì„œ ë¹„ë™ê¸° ì²˜ë¦¬ê°€ ì¤‘ìš”í•œ ì´ìœ ì— ëŒ€í•´ ì„¤ëª…í•´ì£¼ì„¸ìš”.</textarea>

            <label for="answer">ë‚˜ì˜ ë‹µë³€</label>
            <textarea id="answer" required>FastAPIëŠ” ë¹„ë™ê¸° í”„ë ˆì„ì›Œí¬ì´ë¯€ë¡œ, I/O ì‘ì—…ì´ ë§ì€ ê³³ì—ì„œ ì„±ëŠ¥ì„ ë†’ì´ê¸° ìœ„í•´ async/awaitë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</textarea>

            <button type="submit" id="submitButton">
                ğŸš€ AI í”¼ë“œë°± ìƒì„± ìš”ì²­
            </button>
        </form>
    </div>

    <div class="card result-section">
        <h2>AI íŒì • ê²°ê³¼</h2>
        
        <div id="loading">âœ¨ AIê°€ ë‹µë³€ì„ ë¶„ì„ ì¤‘ì…ë‹ˆë‹¤... ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”.</div>

        <div id="feedback-output">
            <div class="feedback-item">
                <p>ì™¼ìª½ í¼ì— ë°ì´í„°ë¥¼ ì…ë ¥í•˜ê³  'AI í”¼ë“œë°± ìƒì„± ìš”ì²­' ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
            </div>
        </div>
        
        <h3 style="margin-top: 30px; color: var(--color-primary-blue); font-size: 1.2em;">ì›ë³¸ ì‘ë‹µ JSON</h3>
        <pre id="raw-json-output">ê²°ê³¼ ëŒ€ê¸° ì¤‘...</pre>
    </div>
</div>

<script>
    // ğŸ’¡ í•µì‹¬ ìš”êµ¬ ì‚¬í•­: API ì„œë²„ì˜ ì£¼ì†Œë¥¼ ë‹´ëŠ” ìƒìˆ˜
    //const SERVER_URL = 'http://127.0.0.1:8000/generate_feedback'; 
    const SERVER_URL = 'https://eace7031-eac0-4e5f-bb05-dfb9ffd9096a-00-cxvzdo1jt7x5.sisko.replit.dev/generate_minutes'; // (ë§Œì•½ í†µì‹  ì˜¤ë¥˜ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê³  ì‹¶ë‹¤ë©´ ì´ ì¤„ì„ í™œì„±í™”í•˜ì„¸ìš”.)

    const form = document.getElementById('feedbackForm');
    const loadingDiv = document.getElementById('loading');
    const feedbackOutputDiv = document.getElementById('feedback-output');
    const rawJsonOutput = document.getElementById('raw-json-output');
    const submitButton = document.getElementById('submitButton');

    form.addEventListener('submit', register); // í¼ ì œì¶œ ì‹œ register í•¨ìˆ˜ í˜¸ì¶œ

    /**
     * ë©´ì ‘ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ì—¬ FastAPI ì„œë²„ì— ë¹„ë™ê¸° POST ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
     */
    async function register(e) {
        e.preventDefault();
        
        // ì…ë ¥ í•„ë“œì˜ ë°ì´í„°ë¥¼ ëª¨ì•„ JSON í˜•íƒœë¡œ êµ¬ì„±
        const data = {
            company: document.getElementById('company').value,
            role: document.getElementById('role').value,
            question: document.getElementById('question').value,
            answer: document.getElementById('answer').value
        };

        // UI ìƒíƒœ ì—…ë°ì´íŠ¸: ë¡œë”© ì‹œì‘
        loadingDiv.style.display = 'block';
        feedbackOutputDiv.innerHTML = '';
        rawJsonOutput.textContent = 'ë°ì´í„° ìš”ì²­ ì¤‘...';
        submitButton.disabled = true;
        submitButton.textContent = 'ì²˜ë¦¬ ì¤‘...';

        try {
            // ğŸ’¡ í•µì‹¬ ìš”êµ¬ ì‚¬í•­: fetch í•¨ìˆ˜ë¥¼ í¬í•¨í•œ í†µì‹  ë¡œì§
            const response = await fetch(SERVER_URL, {
                method: 'POST', // í†µì‹  ë°©ì‹: POST
                headers: {
                    'Content-Type': 'application/json'
                },
                // JSON ë°ì´í„°: ì…ë ¥ í•„ë“œ ë°ì´í„°ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ì „ì†¡
                body: JSON.stringify(data) 
            });

            if (!response.ok) {
                // HTTP ìƒíƒœ ì½”ë“œê°€ 200ë²ˆëŒ€ê°€ ì•„ë‹ ê²½ìš° ì˜¤ë¥˜ ì²˜ë¦¬
                let errorDetail = response.statusText;
                try {
                    const errorData = await response.json();
                    errorDetail = errorData.detail || errorDetail;
                } catch {} // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ê¸°ë³¸ í…ìŠ¤íŠ¸ ì‚¬ìš©
                throw new Error(`API í†µì‹  ì˜¤ë¥˜ (${response.status}): ${errorDetail}`);
            }

            const feedbackJson = await response.json();
            
            // ì„±ê³µì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°›ì€ í›„ ì²˜ë¦¬
            displayFeedback(feedbackJson);
            rawJsonOutput.textContent = JSON.stringify(feedbackJson, null, 2);

        } catch (error) {
            // ğŸ’¡ ì£¼ì˜: í˜„ì¬ SERVER_URLì´ ë¹„ì–´ìˆê±°ë‚˜ ì„œë²„ê°€ êº¼ì ¸ìˆìœ¼ë©´ ì´ catch ë¸”ë¡ ì‹¤í–‰ë¨
            console.error('API í˜¸ì¶œ ì¤‘ ì‹¬ê°í•œ ì˜¤ë¥˜ ë°œìƒ:', error);
            
            feedbackOutputDiv.innerHTML = `
                <div class="feedback-item error">
                    <strong>í†µì‹  ì˜¤ë¥˜ ë°œìƒ!</strong>
                    <p>${error.message}</p>
                    <p>âš ï¸ **SERVER_URL**: <code>${SERVER_URL}</code></p>
                    <p>Backend (FastAPI) ì„œë²„ê°€ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰ ì¤‘ì´ë©°, API í‚¤ ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.</p>
                </div>`;
            rawJsonOutput.textContent = 'í†µì‹  ì˜¤ë¥˜ë¡œ ì¸í•´ ì›ë³¸ JSONì„ ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
            
        } finally {
            // UI ìƒíƒœ ì—…ë°ì´íŠ¸: ë¡œë”© ì¢…ë£Œ ë° ë²„íŠ¼ í™œì„±í™”
            loadingDiv.style.display = 'none';
            submitButton.disabled = false;
            submitButton.textContent = 'ğŸš€ AI í”¼ë“œë°± ìƒì„± ìš”ì²­';
        }
    }

    /**
     * AI ì‘ë‹µ JSONì„ HTMLë¡œ ë³€í™˜í•˜ì—¬ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
     */
    function displayFeedback(data) {
        let htmlContent = '';
        
        // ë°±ì—”ë“œì—ì„œ ì•½ì†í•œ JSON í‚¤ë¥¼ ì‚¬ìš©
        const displayKeys = {
            'ìš”ì•½': 'ğŸ’¡ í•µì‹¬ ìš”ì•½', 
            'ì ìˆ˜': 'â­ ë©´ì ‘ ì ìˆ˜', 
            'í”¼ë“œë°±': 'âœ… ìƒì„¸ í”¼ë“œë°± (ê°•ì /ê°œì„ ì )', 
            'ì¶”ê°€_ì§ˆë¬¸': 'â“ ë©´ì ‘ê´€ì˜ í›„ì† ì§ˆë¬¸'
        };
        
        for (const key in displayKeys) {
            if (data[key] !== undefined) {
                const title = displayKeys[key];
                const content = data[key];
                
                let contentHtml;
                if (key === 'ì ìˆ˜') {
                    contentHtml = `<span class="score">${content} / 10ì </span>`;
                } else {
                    // ì¤„ë°”ê¿ˆ ë¬¸ì(\n)ë¥¼ <br> íƒœê·¸ë¡œ ë³€í™˜í•˜ì—¬ ê°€ë…ì„± í™•ë³´
                    contentHtml = content.replace(/\n/g, '<br>');
                }

                htmlContent += `
                    <div class="feedback-item">
                        <strong>${title}</strong>
                        ${contentHtml}
                    </div>
                `;
            }
        }

        feedbackOutputDiv.innerHTML = htmlContent;
    }
</script>

</body>
</html>
